<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz de Candles - An√°lise Gr√°fica</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #2c3e50, #4a6491);
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .quiz-container {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .question-counter {
            font-size: 1rem;
            color: #4a6491;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .chart-container {
            width: 100%;
            height: 250px;
            margin: 20px 0;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        
        .chart {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding: 20px;
            gap: 40px;
        }
        
        .candle {
            width: 40px;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
        }
        
        .candle-body {
            width: 30px;
            border-radius: 3px;
            min-height: 5px;
        }
        
        .candle-wick {
            width: 3px;
            background-color: #333;
            min-height: 5px;
        }
        
        .candle-info {
            margin-top: 10px;
            font-size: 0.8rem;
            color: #666;
            text-align: center;
        }
        
        .pattern-hint {
            background-color: #e8f4fd;
            border-left: 4px solid #4a6491;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            font-size: 0.9rem;
        }
        
        .pattern-hint h3 {
            color: #4a6491;
            margin-bottom: 8px;
        }
        
        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 25px 0;
        }
        
        .option {
            padding: 15px;
            background-color: #f0f0f0;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            font-weight: 500;
        }
        
        .option:hover {
            background-color: #e0e0e0;
            transform: translateY(-2px);
        }
        
        .option.selected {
            border-color: #4a6491;
            background-color: #e3ebf7;
        }
        
        .option.correct {
            border-color: #2ecc71;
            background-color: #d5f5e3;
        }
        
        .option.incorrect {
            border-color: #e74c3c;
            background-color: #fadbd8;
        }
        
        .option.disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        button {
            padding: 12px 25px;
            background-color: #4a6491;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #3a5481;
        }
        
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        .result-container {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .result-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #2c3e50;
        }
        
        .score {
            font-size: 3rem;
            font-weight: bold;
            color: #4a6491;
            margin: 20px 0;
        }
        
        .feedback {
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            background-color: #f8f9fa;
        }
        
        .explanation {
            text-align: left;
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #4a6491;
        }
        
        .hidden {
            display: none;
        }
        
        .progress-bar {
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: #4a6491;
            width: 0%;
            transition: width 0.3s;
        }
        
        .feedback-message {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            font-weight: bold;
            font-size: 1.1rem;
            animation: fadeIn 0.5s ease-in;
        }
        
        .feedback-correct {
            background-color: #d5f5e3;
            color: #27ae60;
            border: 2px solid #2ecc71;
        }
        
        .feedback-incorrect {
            background-color: #fadbd8;
            color: #e74c3c;
            border: 2px solid #e74c3c;
        }
        
        .timer {
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            color: #4a6491;
            margin: 10px 0;
        }
        
        .next-timer {
            font-size: 0.9rem;
            color: #666;
            margin-top: 10px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @media (max-width: 600px) {
            .options {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .chart {
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Quiz de An√°lise de Candles</h1>
            <p class="subtitle">Teste seus conhecimentos em padr√µes gr√°ficos de candlestick</p>
        </header>
        
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        
        <div id="quiz-screen" class="quiz-container">
            <div class="question-counter" id="question-counter">Pergunta 1 de 10</div>
            <h2 id="question-text">Identifique o padr√£o de candle mostrado no gr√°fico:</h2>
            
            <div class="pattern-hint" id="pattern-hint">
                <!-- Dica sobre o padr√£o ser√° inserida via JavaScript -->
            </div>
            
            <div class="chart-container">
                <div class="chart" id="chart"></div>
            </div>
            
            <div id="feedback-message" class="hidden">
                <!-- Mensagem de feedback ser√° inserida via JavaScript -->
            </div>
            
            <div class="options" id="options">
                <!-- As op√ß√µes ser√£o inseridas via JavaScript -->
            </div>
            
            <div class="timer hidden" id="timer">
                Pr√≥xima pergunta em: <span id="countdown">3</span> segundos
            </div>
            
            <div class="navigation">
                <button id="prev-btn" disabled>Anterior</button>
                <button id="next-btn">Pr√≥xima</button>
            </div>
        </div>
        
        <div id="result-screen" class="result-container hidden">
            <h2 class="result-title">Quiz Conclu√≠do!</h2>
            <div class="score" id="final-score">0/10</div>
            <div class="feedback" id="feedback"></div>
            <button id="restart-btn">Refazer Quiz</button>
        </div>
    </div>

    <script>
        // Dados do quiz com descri√ß√µes melhoradas
        const quizData = [
            {
                question: "Identifique o padr√£o de candle mostrado no gr√°fico:",
                chart: "hammer",
                options: ["Martelo (Hammer)", "Doji", "Engolfo de Alta", "Estrela Cadente"],
                correctAnswer: 0,
                hint: "Padr√£o de revers√£o de baixa: corpo pequeno no topo, sombra inferior longa (2-3x o corpo)",
                explanation: "O Martelo (Hammer) √© um padr√£o de revers√£o de baixa. Caracteriza-se por um corpo pequeno na parte superior e uma sombra inferior longa (pelo menos o dobro do corpo). Aparece em tend√™ncias de baixa e sinaliza uma poss√≠vel revers√£o para alta."
            },
            {
                question: "Identifique o padr√£o de candle mostrado no gr√°fico:",
                chart: "engulfing_bullish",
                options: ["Martelo", "Doji", "Engolfo de Alta", "Engolfo de Baixa"],
                correctAnswer: 2,
                hint: "Padr√£o de dois candles: o segundo candle de alta engole completamente o corpo do primeiro candle de baixa",
                explanation: "O Engolfo de Alta (Bullish Engulfing) √© um padr√£o de revers√£o de baixa composto por dois candles. O segundo candle (de alta) 'engole' completamente o corpo do primeiro candle (de baixa), indicando uma mudan√ßa brusca no sentimento do mercado."
            },
            {
                question: "Identifique o padr√£o de candle mostrado no gr√°fico:",
                chart: "doji",
                options: ["Martelo", "Doji", "Estrela Cadente", "Harami de Alta"],
                correctAnswer: 1,
                hint: "Padr√£o de indecis√£o: abertura e fechamento no mesmo n√≠vel (corpo muito pequeno ou inexistente)",
                explanation: "O Doji √© um padr√£o de indecis√£o onde a abertura e o fechamento s√£o iguais ou muito pr√≥ximos, formando um corpo pequeno ou inexistente. Indica que compradores e vendedores est√£o em equil√≠brio e pode sinalizar uma poss√≠vel revers√£o."
            },
            {
                question: "Identifique o padr√£o de candle mostrado no gr√°fico:",
                chart: "shooting_star",
                options: ["Martelo", "Doji", "Estrela Cadente", "Engolfo de Baixa"],
                correctAnswer: 2,
                hint: "Padr√£o de revers√£o de alta: corpo pequeno na base, sombra superior longa, aparece no topo de tend√™ncia",
                explanation: "A Estrela Cadente (Shooting Star) √© um padr√£o de revers√£o de alta. Tem um corpo pequeno na parte inferior e uma sombra superior longa. Aparece no topo de uma tend√™ncia de alta e sinaliza uma poss√≠vel revers√£o para baixa."
            },
            {
                question: "Identifique o padr√£o de candle mostrado no gr√°fico:",
                chart: "harami_bullish",
                options: ["Harami de Alta", "Harami de Baixa", "Engolfo de Alta", "Doji"],
                correctAnswer: 0,
                hint: "Padr√£o de dois candles: candle pequeno completamente contido dentro do corpo do candle anterior grande",
                explanation: "O Harami de Alta √© um padr√£o de revers√£o de baixa composto por dois candles. O primeiro √© um candle longo de baixa e o segundo √© um candle pequeno (de alta ou baixa) completamente contido dentro do corpo do primeiro. Indica que o momentum de baixa est√° enfraquecendo."
            },
            {
                question: "Identifique o padr√£o de candle mostrado no gr√°fico:",
                chart: "engulfing_bearish",
                options: ["Engolfo de Alta", "Engolfo de Baixa", "Martelo Invertido", "Estrela Cadente"],
                correctAnswer: 1,
                hint: "Padr√£o de dois candles: o segundo candle de baixa engole completamente o corpo do primeiro candle de alta",
                explanation: "O Engolfo de Baixa (Bearish Engulfing) √© um padr√£o de revers√£o de alta. O segundo candle (de baixa) 'engole' completamente o corpo do primeiro candle (de alta), indicando uma mudan√ßa brusca no sentimento do mercado a favor dos vendedores."
            },
            {
                question: "Identifique o padr√£o de candle mostrado no gr√°fico:",
                chart: "hanging_man",
                options: ["Martelo", "Homem Enforcado", "Doji", "Estrela Cadente"],
                correctAnswer: 1,
                hint: "Mesma apar√™ncia do Martelo, mas aparece no TOPO de tend√™ncia de alta (revers√£o para baixa)",
                explanation: "O Homem Enforcado (Hanging Man) √© um padr√£o de revers√£o de alta. Tem a mesma apar√™ncia do Martelo, mas aparece no topo de uma tend√™ncia de alta. Sinaliza que os compradores est√£o perdendo controle e uma revers√£o para baixa √© poss√≠vel."
            },
            {
                question: "Identifique o padr√£o de candle mostrado no gr√°fico:",
                chart: "morning_star",
                options: ["Estrela da Manh√£", "Estrela da Tarde", "Harami de Alta", "Engolfo de Alta"],
                correctAnswer: 0,
                hint: "Padr√£o de tr√™s candles: candle de baixa grande + candle pequeno (doji) + candle de alta grande",
                explanation: "A Estrela da Manh√£ (Morning Star) √© um padr√£o de revers√£o de baixa de tr√™s candles. Consiste em um candle longo de baixa, um candle pequeno (geralmente um Doji) e um candle longo de alta. √â um forte sinal de revers√£o de baixa para alta."
            },
            {
                question: "Identifique o padr√£o de candle mostrado no gr√°fico:",
                chart: "evening_star",
                options: ["Estrela da Manh√£", "Estrela da Tarde", "Harami de Baixa", "Engolfo de Baixa"],
                correctAnswer: 1,
                hint: "Padr√£o de tr√™s candles: candle de alta grande + candle pequeno (doji) + candle de baixa grande",
                explanation: "A Estrela da Tarde (Evening Star) √© um padr√£o de revers√£o de alta de tr√™s candles. Consiste em um candle longo de alta, um candle pequeno (geralmente um Doji) e um candle longo de baixa. √â um forte sinal de revers√£o de alta para baixa."
            },
            {
                question: "Identifique o padr√£o de candle mostrado no gr√°fico:",
                chart: "inverted_hammer",
                options: ["Martelo", "Martelo Invertido", "Estrela Cadente", "Doji"],
                correctAnswer: 1,
                hint: "Padr√£o de revers√£o de baixa: corpo pequeno na base, sombra superior longa, aparece no FUNDO de tend√™ncia",
                explanation: "O Martelo Invertido (Inverted Hammer) √© um padr√£o de revers√£o de baixa. Tem um corpo pequeno na parte inferior e uma sombra superior longa. Aparece em tend√™ncias de baixa e, embora similar √† Estrela Cadente, tem implica√ß√µes de revers√£o de baixa quando aparece no fundo de uma tend√™ncia."
            }
        ];

        // Elementos do DOM
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        const questionCounter = document.getElementById('question-counter');
        const questionText = document.getElementById('question-text');
        const patternHint = document.getElementById('pattern-hint');
        const chartContainer = document.getElementById('chart');
        const optionsContainer = document.getElementById('options');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');
        const finalScore = document.getElementById('final-score');
        const feedback = document.getElementById('feedback');
        const progressBar = document.getElementById('progress');
        const feedbackMessage = document.getElementById('feedback-message');
        const timer = document.getElementById('timer');
        const countdown = document.getElementById('countdown');

        // Estado do quiz
        let currentQuestion = 0;
        let userAnswers = new Array(quizData.length).fill(null);
        let score = 0;
        let timerInterval = null;
        let answerSubmitted = false;

        // Inicializar o quiz
        function initQuiz() {
            showQuestion();
            updateProgressBar();
        }

        // Mostrar pergunta atual
        function showQuestion() {
            const question = quizData[currentQuestion];
            
            // Resetar estado
            answerSubmitted = false;
            feedbackMessage.classList.add('hidden');
            timer.classList.add('hidden');
            nextBtn.disabled = true;
            
            // Atualizar contador
            questionCounter.textContent = `Pergunta ${currentQuestion + 1} de ${quizData.length}`;
            
            // Atualizar texto da pergunta
            questionText.textContent = question.question;
            
            // Atualizar dica do padr√£o
            patternHint.innerHTML = `<h3>üí° Dica:</h3><p>${question.hint}</p>`;
            
            // Gerar gr√°fico
            generateChart(question.chart);
            
            // Gerar op√ß√µes
            generateOptions(question.options, userAnswers[currentQuestion]);
            
            // Atualizar bot√µes de navega√ß√£o
            prevBtn.disabled = currentQuestion === 0;
            
            if (currentQuestion === quizData.length - 1) {
                nextBtn.textContent = 'Finalizar';
            } else {
                nextBtn.textContent = 'Pr√≥xima';
            }
        }

        // Gerar gr√°fico de candle
        function generateChart(chartType) {
            chartContainer.innerHTML = '';
            
            // Criar candles baseados no tipo de padr√£o
            switch(chartType) {
                case 'hammer':
                    createSingleCandle(50, 52, 30, 51, "Corpo pequeno no topo<br>Sombra inferior longa");
                    break;
                case 'engulfing_bullish':
                    createTwoCandles(
                        [45, 52], [48, 55], [42, 50], [43, 54],
                        ["1¬∫: Candle de baixa", "2¬∫: Candle de alta ENGOLINDO o anterior"]
                    );
                    break;
                case 'doji':
                    createSingleCandle(50, 52, 48, 50, "Abertura = Fechamento<br>Corpo muito pequeno");
                    break;
                case 'shooting_star':
                    createSingleCandle(50, 65, 48, 49, "Corpo pequeno na base<br>Sombra superior longa");
                    break;
                case 'harami_bullish':
                    createTwoCandles(
                        [42, 44], [48, 45], [38, 43], [40, 44],
                        ["1¬∫: Candle grande de baixa", "2¬∫: Candle pequeno DENTRO do anterior"]
                    );
                    break;
                case 'engulfing_bearish':
                    createTwoCandles(
                        [48, 42], [52, 45], [46, 40], [50, 41],
                        ["1¬∫: Candle de alta", "2¬∫: Candle de baixa ENGOLINDO o anterior"]
                    );
                    break;
                case 'hanging_man':
                    createSingleCandle(60, 62, 40, 59, "Corpo pequeno no topo<br>Sombra inferior longa<br>TOPO da tend√™ncia");
                    break;
                case 'morning_star':
                    createThreeCandles(
                        [42, 44, 48], [45, 45, 52], [38, 43, 46], [40, 44, 50],
                        ["1¬∫: Baixa forte", "2¬∫: Indecis√£o (Doji)", "3¬∫: Alta forte"]
                    );
                    break;
                case 'evening_star':
                    createThreeCandles(
                        [48, 50, 44], [52, 51, 46], [46, 49, 42], [50, 50, 43],
                        ["1¬∫: Alta forte", "2¬∫: Indecis√£o (Doji)", "3¬∫: Baixa forte"]
                    );
                    break;
                case 'inverted_hammer':
                    createSingleCandle(50, 65, 48, 51, "Corpo pequeno na base<br>Sombra superior longa<br>FUNDO da tend√™ncia");
                    break;
            }
        }

        // Criar um candle √∫nico
        function createSingleCandle(open, high, low, close, description) {
            const candle = document.createElement('div');
            candle.className = 'candle';
            
            const isBullish = close > open;
            
            // Wick superior (se houver)
            if (high > Math.max(open, close)) {
                const upperWick = document.createElement('div');
                upperWick.className = 'candle-wick';
                upperWick.style.height = '20px';
                upperWick.style.backgroundColor = isBullish ? '#2ecc71' : '#e74c3c';
                candle.appendChild(upperWick);
            }
            
            // Corpo do candle - SEMPRE VIS√çVEL
            const body = document.createElement('div');
            body.className = 'candle-body';
            
            // Para o Martelo, garantir que o corpo seja vis√≠vel mas pequeno
            if (Math.abs(close - open) < 5) {
                body.style.height = '15px'; // Altura m√≠nima para ser vis√≠vel
            } else {
                body.style.height = '25px';
            }
            
            body.style.backgroundColor = isBullish ? '#2ecc71' : '#e74c3c';
            body.style.minHeight = '15px'; // Garantir que seja vis√≠vel
            candle.appendChild(body);
            
            // Wick inferior (sempre presente no Martelo)
            const lowerWick = document.createElement('div');
            lowerWick.className = 'candle-wick';
            lowerWick.style.height = '60px'; // Sombra longa para o Martelo
            lowerWick.style.backgroundColor = isBullish ? '#2ecc71' : '#e74c3c';
            candle.appendChild(lowerWick);
            
            // Informa√ß√£o do candle
            const info = document.createElement('div');
            info.className = 'candle-info';
            info.innerHTML = description;
            candle.appendChild(info);
            
            chartContainer.appendChild(candle);
        }

        // Criar dois candles
        function createTwoCandles(opens, highs, lows, closes, descriptions) {
            for (let i = 0; i < 2; i++) {
                const candle = document.createElement('div');
                candle.className = 'candle';
                
                const open = opens[i];
                const high = highs[i];
                const low = lows[i];
                const close = closes[i];
                const description = descriptions[i];
                
                const isBullish = close > open;
                
                // Wick superior
                if (high > Math.max(open, close)) {
                    const upperWick = document.createElement('div');
                    upperWick.className = 'candle-wick';
                    upperWick.style.height = '15px';
                    upperWick.style.backgroundColor = isBullish ? '#2ecc71' : '#e74c3c';
                    candle.appendChild(upperWick);
                }
                
                // Corpo do candle - MAIOR para Engolfo
                const body = document.createElement('div');
                body.className = 'candle-body';
                
                // Primeiro candle menor, segundo candle maior (para Engolfo)
                if (i === 0) {
                    body.style.height = '25px';
                } else {
                    body.style.height = '45px'; // Segundo candle maior
                }
                
                body.style.backgroundColor = isBullish ? '#2ecc71' : '#e74c3c';
                body.style.minHeight = '20px';
                candle.appendChild(body);
                
                // Wick inferior
                if (low < Math.min(open, close)) {
                    const lowerWick = document.createElement('div');
                    lowerWick.className = 'candle-wick';
                    lowerWick.style.height = '15px';
                    lowerWick.style.backgroundColor = isBullish ? '#2ecc71' : '#e74c3c';
                    candle.appendChild(lowerWick);
                }
                
                // Informa√ß√£o do candle
                const info = document.createElement('div');
                info.className = 'candle-info';
                info.innerHTML = description;
                candle.appendChild(info);
                
                chartContainer.appendChild(candle);
            }
        }

        // Criar tr√™s candles
        function createThreeCandles(opens, highs, lows, closes, descriptions) {
            for (let i = 0; i < 3; i++) {
                const candle = document.createElement('div');
                candle.className = 'candle';
                
                const open = opens[i];
                const high = highs[i];
                const low = lows[i];
                const close = closes[i];
                const description = descriptions[i];
                
                const isBullish = close > open;
                
                // Wick superior
                if (high > Math.max(open, close)) {
                    const upperWick = document.createElement('div');
                    upperWick.className = 'candle-wick';
                    upperWick.style.height = '12px';
                    upperWick.style.backgroundColor = isBullish ? '#2ecc71' : '#e74c3c';
                    candle.appendChild(upperWick);
                }
                
                // Corpo do candle
                const body = document.createElement('div');
                body.className = 'candle-body';
                
                // Primeiro e terceiro candles maiores, segundo menor
                if (i === 1) {
                    body.style.height = '10px'; // Doji ou candle pequeno
                } else {
                    body.style.height = '30px'; // Candles grandes
                }
                
                body.style.backgroundColor = isBullish ? '#2ecc71' : '#e74c3c';
                body.style.minHeight = '8px';
                candle.appendChild(body);
                
                // Wick inferior
                if (low < Math.min(open, close)) {
                    const lowerWick = document.createElement('div');
                    lowerWick.className = 'candle-wick';
                    lowerWick.style.height = '12px';
                    lowerWick.style.backgroundColor = isBullish ? '#2ecc71' : '#e74c3c';
                    candle.appendChild(lowerWick);
                }
                
                // Informa√ß√£o do candle
                const info = document.createElement('div');
                info.className = 'candle-info';
                info.innerHTML = description;
                candle.appendChild(info);
                
                chartContainer.appendChild(candle);
            }
        }

        // Gerar op√ß√µes de resposta
        function generateOptions(options, selectedAnswer) {
            optionsContainer.innerHTML = '';
            
            options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                
                if (selectedAnswer === index) {
                    optionElement.classList.add('selected');
                }
                
                optionElement.textContent = option;
                optionElement.addEventListener('click', () => selectOption(index));
                
                optionsContainer.appendChild(optionElement);
            });
        }

        // Selecionar uma op√ß√£o
        function selectOption(index) {
            if (answerSubmitted) return; // N√£o permitir mudar resposta ap√≥s enviar
            
            userAnswers[currentQuestion] = index;
            
            // Remover sele√ß√£o anterior
            const options = document.querySelectorAll('.option');
            options.forEach(option => option.classList.remove('selected'));
            
            // Adicionar sele√ß√£o atual
            options[index].classList.add('selected');
            
            // Mostrar feedback imediato
            showFeedback(index);
        }

        // Mostrar feedback da resposta
        function showFeedback(selectedIndex) {
            answerSubmitted = true;
            const correctIndex = quizData[currentQuestion].correctAnswer;
            const isCorrect = selectedIndex === correctIndex;
            
            // Destacar op√ß√µes corretas e incorretas
            const options = document.querySelectorAll('.option');
            options.forEach((option, index) => {
                if (index === correctIndex) {
                    option.classList.add('correct');
                } else if (index === selectedIndex && !isCorrect) {
                    option.classList.add('incorrect');
                }
                option.classList.add('disabled');
            });
            
            // Mostrar mensagem de feedback
            feedbackMessage.innerHTML = '';
            feedbackMessage.className = 'feedback-message';
            
            if (isCorrect) {
                feedbackMessage.classList.add('feedback-correct');
                feedbackMessage.innerHTML = '‚úÖ <strong>Correto!</strong> Parab√©ns, voc√™ acertou!';
            } else {
                feedbackMessage.classList.add('feedback-incorrect');
                feedbackMessage.innerHTML = `‚ùå <strong>Incorreto!</strong> A resposta correta √©: <strong>${quizData[currentQuestion].options[correctIndex]}</strong>`;
            }
            
            feedbackMessage.classList.remove('hidden');
            
            // Ativar temporizador para pr√≥xima pergunta
            startTimer();
        }

        // Iniciar temporizador para pr√≥xima pergunta
        function startTimer() {
            let timeLeft = 3;
            countdown.textContent = timeLeft;
            timer.classList.remove('hidden');
            
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            timerInterval = setInterval(() => {
                timeLeft--;
                countdown.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    nextQuestion();
                }
            }, 1000);
        }

        // Atualizar barra de progresso
        function updateProgressBar() {
            const progress = ((currentQuestion + 1) / quizData.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // Navegar para a pr√≥xima pergunta
        function nextQuestion() {
            if (currentQuestion < quizData.length - 1) {
                currentQuestion++;
                showQuestion();
                updateProgressBar();
            } else {
                showResults();
            }
        }

        // Navegar para a pergunta anterior
        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
                updateProgressBar();
            }
        }

        // Mostrar resultados
        function showResults() {
            // Calcular pontua√ß√£o
            score = 0;
            for (let i = 0; i < quizData.length; i++) {
                if (userAnswers[i] === quizData[i].correctAnswer) {
                    score++;
                }
            }
            
            // Atualizar elementos de resultado
            finalScore.textContent = `${score}/${quizData.length}`;
            
            // Feedback personalizado
            if (score === quizData.length) {
                feedback.textContent = "üéâ Excelente! Voc√™ domina a an√°lise de candlestick!";
                feedback.style.backgroundColor = "#d5f5e3";
                feedback.style.color = "#27ae60";
            } else if (score >= quizData.length * 0.7) {
                feedback.textContent = "üëç Muito bom! Voc√™ tem um bom conhecimento de padr√µes de candles.";
                feedback.style.backgroundColor = "#d6eaf8";
                feedback.style.color = "#2980b9";
            } else if (score >= quizData.length * 0.5) {
                feedback.textContent = "üí™ Bom! Continue praticando para melhorar seu reconhecimento de padr√µes.";
                feedback.style.backgroundColor = "#fcf3cf";
                feedback.style.color = "#f39c12";
            } else {
                feedback.textContent = "üìö Est√° apenas come√ßando! Revise os padr√µes e tente novamente.";
                feedback.style.backgroundColor = "#fadbd8";
                feedback.style.color = "#e74c3c";
            }
            
            // Mostrar tela de resultados
            quizScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
        }

        // Reiniciar quiz
        function restartQuiz() {
            currentQuestion = 0;
            userAnswers = new Array(quizData.length).fill(null);
            score = 0;
            
            quizScreen.classList.remove('hidden');
            resultScreen.classList.add('hidden');
            
            initQuiz();
        }

        // Event listeners
        prevBtn.addEventListener('click', prevQuestion);
        nextBtn.addEventListener('click', nextQuestion);
        restartBtn.addEventListener('click', restartQuiz);

        // Inicializar o quiz
        initQuiz();
    </script>
</body>
</html>
